

//create fast context with one workspace

 curl "http://geoapi.denebinc.com/st_geocreatefastcontext" -H "Accept: application/json" -H "Content-Type:application/json" --data @<(cat <<EOF
{"name_conn": "conexion","store": "geo_testyad10","workspace": "geo_testyad10","dbname": "armenia","host":"db","port":"5432","user": "docker","password": "docker", "schema": "integration","layers":[{"tablename": "construccion_insumos","style":"polygon","title":"titulo mapa api"},{"tablename": "manzanas","style": "polygon",    "title":"titulo mapa api"},{"tablename": "perimetros","style":"polygon","title":"titulo mapa api"},{"tablename": "predios_integrados","style": "polygon",    "title":"titulo mapa api"},{"tablename": "veredas","style": "polygon","title":"titulo layer api"}]}
EOF
)


//create context fast from severals databases and creating one map
 curl "http://geoapi.denebinc.com:5000/st_geocreatefastcontextfewbds" -H "Accept: application/json" -H "Content-Type:application/json" --data @<(cat <<EOF
{"connections": [{"name_conn": "conexion","catalog_name": "prueba_fas11","catalog_title": "prueba_fast11","store": "geo_fast7","workspace": [{"name": "geo_fast7",
"layers": [{"tablename": "construccion_insumos","style": "construccion_insumo","title":"titulo mapa api"},{"tablename": "manzanas","style": "predio",               "title":"titulo mapa api"},{"tablename": "perimetros","style": "predio","title":"titulo mapa api"},{"tablename": "predios_integrados","style": "predio_historico",     "title":"titulo mapa api"},{"tablename": "veredas","style": "unidad_construccion","title":"titulo mapa api"}]}],"dbname": "armenia","host": "db","port": "5432",
"user": "docker","password": "docker","schema": "integration"},{"name_conn": "conexion2","catalog_name": "prueba_fast11","catalog_title": "prueba_fast11", "store": "geo_fast2","workspace":[{"name": "geo_fast2","layers": [{"tablename": "predios_integrados","style": "polygon","title":"titulo mapa api"}]}], "dbname": "armenia","host": "db","port": "5432","user": "docker","password": "docker","schema": "integration"}],"mapacontext":{"workspace":[{"name": "geo_fast7", "layers":[{"tablename": "construccion_insumos","style": "construccion_insumo","title":"titulo mapa api"},{"tablename": "manzanas","style": "area_intervencion_general",
"title":"titulo mapa api"},{"tablename": "perimetros","style": "predio_historico","title":"titulo mapa api"},{"tablename": "predios_integrados","style": "predio",     "title":"titulo mapa api"},{"tablename":"veredas","style": "area_intervencion_especifica","title":"titulo mapa api"}]},{"name":"geo_fast2","layers":[{ "tablename": "gc_construccion","style": "polygon","title":"titulo mapa api"}]}]}}
EOF
)

//create map
curl "http://geoapi.denebinc.com/st_geocreatemap" -H "Accept: application/json" -H "Content-Type:application/json" --data @<(cat <<EOF
{"workspace":"geo_fast7","map_name":"testapi3","map_description":"mapa","layers":[{"tablename": "construccion_insumos","style": "construccion_insumo",    "title":"titulo mapa api"},{"tablename":"manzanas","style":"manzana","title":"titulo mapa api"},{"tablename": "perimetros","style": "predio","title":"titulo mapa api"}, {"tablename": "predios_integrados","style": "predio","title":"titulo mapa api"},{"tablename": "veredas","style": "polygon","title":"titulo mapa api"}]}
EOF
)

//create map with severals bd
//create one map from severals workspaces
 curl "http://geoapi.denebinc.com/st_geocreatemapfewbds" -H "Accept: application/json" -H "Content-Type:application/json" --data @<(cat <<EOF
{"catalog_name": "prueba","catalog_title":"prueba","map_name": "test8","map_description": "mapa","workspace":[{"name": "geo_fast7","layers": [{"tablename": "construccion_insumos","style": "construccion_insumo","title":"titulo mapa api"},{"tablename": "manzanas","style": "manzana","title":"titulo mapa api"},{ "tablename": "perimetros","style":"predio","title":"titulo mapa api"},{"tablename":"predios_integrados","style": "predio","title":"titulo mapa api"},{"tablename": "veredas","style": "polygon","title":"titulo mapa api"}]},{"name": "geo_testyad8","layers":[{"tablename":"veredas","style":"polygon","title":""}]}]
}
EOF
)
 //create workspace

 curl "http://geoapi.denebinc.com/create_workspace" -H "Accept: application/json" -H "Content-Type:application/json" --data @<(cat <<EOF
{
    "name":"geoTestApi"
}
EOF
)

//create store

 curl "http://geoapi.denebinc.com/st_createstore" -H "Accept: application/json" -H "Content-Type:application/json" --data @<(cat <<EOF
{
"store_name":"geo_testapi",
"workspace":"geo_testapi",
"db_name":"armenia",
"host":"db",
"port":"5432",
"schema":"integration",
"pg_user":"docker",
"pg_password":"docker"
}
EOF
)

// publish feature type

 curl "http://geoapi.denebinc.com/publish_featuretype" -H "Accept: application/json" -H "Content-Type:application/json" --data @<(cat <<EOF
{
    "store":"geo_testapi",
    "workspace":"geo_testapi",
    "pg_table":"manzanas"
}
EOF
)

//create layer

 curl "http://geoapi.denebinc.com/st_geocreatelayer" -H "Accept: application/json" -H "Content-Type:application/json" --data @<(cat <<EOF
{
    "name":"layer_testapi",
    "workspace":"geo_testapi",
    "store":"geo_testapi",
    "table":"gc_construccion",
    "style":"construccion_insumos___b4acb9b0-2f3a-11ec-b6ba-f30df7d17559",
    "srs":"EPSG:9377"
}
EOF
)
